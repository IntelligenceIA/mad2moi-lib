---
const posts = await Astro.glob('./*.md');
const sorted = posts.sort((a,b)=> new Date(b.frontmatter.pubDate) - new Date(a.frontmatter.pubDate));
---
<html lang="fr">
  <head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Mad2Moi — Blog</title><link rel="stylesheet" href="/src/styles/global.css" /></head>
  <body>
    <header class="max-w-5xl mx-auto px-4 py-6 flex items-center gap-4">
      <img src="/logo.png" alt="Mad2Moi" class="h-10 w-auto" />
      <h1 class="text-2xl font-semibold">Mad2Moi — Blog</h1>
      <a class="ml-auto" href="https://www.mad2moi.com">S’inscrire</a>
    </header>
    <main class="max-w-5xl mx-auto px-4 grid gap-8 md:grid-cols-2">
      {sorted.map(p => (
        <a href={p.url} class="block p-4 rounded-xl bg-white/5 hover:bg-white/10 transition">
          {p.frontmatter.image && <img src={p.frontmatter.image} alt={p.frontmatter.description} class="rounded-lg mb-3 w-full aspect-[16/9] object-cover" loading="lazy" />}
          <h2 class="text-xl font-semibold">{p.frontmatter.title}</h2>
          <p class="text-white/70 text-sm">{p.frontmatter.description}</p>
          <p class="text-white/50 text-xs mt-1">Le {p.frontmatter.pubDate} · Alicia Walker</p>
        </a>
      ))}
    </main>
  </body>
</html>
