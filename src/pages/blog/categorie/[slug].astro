---
const { slug } = Astro.params;
const posts = await Astro.glob('../*.md');
const filtered = posts.filter(p => (p.frontmatter.category || '').toLowerCase() === slug.toLowerCase());
---
<html lang="fr">
  <head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Categorie: {slug}</title><link rel="stylesheet" href="/src/styles/global.css" /></head>
  <body>
    <header class="max-w-5xl mx-auto px-4 py-6 flex items-center gap-4">
      <img src="/logo.png" alt="Mad2Moi" class="h-10 w-auto" />
      <h1 class="text-2xl font-semibold">Categorie : {slug}</h1>
      <a class="ml-auto" href="/blog">Retour blog</a>
    </header>
    <main class="max-w-5xl mx-auto px-4 grid gap-8">
      {filtered.length === 0 && <p class="text-white/70">Aucun article pour cette categorie.</p>}
      {filtered.map(p => (
        <a href={`/blog/${p.file.split('/').pop().replace('.md','')}`} class="block p-4 rounded-xl bg-white/5 hover:bg-white/10 transition">
          <h2 class="text-xl font-semibold">{p.frontmatter.title}</h2>
          <p class="text-white/70 text-sm">{p.frontmatter.description}</p>
        </a>
      ))}
    </main>
  </body>
</html>
